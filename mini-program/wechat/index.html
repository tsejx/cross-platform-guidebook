<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/cross-platform-guidebook/umi.css" />
    <script>
      window.routerBase = "/cross-platform-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.14
    </script>
    <title>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/cross-platform-guidebook-favicon.svg&#x27;)" href="/cross-platform-guidebook//">Cross Platform Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/cross-platform-guidebook//hybird">Hybrid</a><a aria-current="page" class="active" href="/cross-platform-guidebook//mini-program">小程序</a><a href="/cross-platform-guidebook//react-native">ReactNative</a><a href="/cross-platform-guidebook//flutter">Flutter</a><a href="/cross-platform-guidebook//electron">Electron</a><a href="/cross-platform-guidebook//pwa">PWA</a><a href="/cross-platform-guidebook//open-source">扩展</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/cross-platform-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/cross-platform-guidebook-favicon.svg&#x27;)" href="/cross-platform-guidebook//"></a><h1>Cross Platform Guidebook</h1><p>跨平台开发完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/cross-platform-guidebook//hybird">Hybrid</a></li><li><a aria-current="page" class="active" href="/cross-platform-guidebook//mini-program">小程序</a></li><li><a href="/cross-platform-guidebook//react-native">ReactNative</a></li><li><a href="/cross-platform-guidebook//flutter">Flutter</a></li><li><a href="/cross-platform-guidebook//electron">Electron</a></li><li><a href="/cross-platform-guidebook//pwa">PWA</a></li><li><a href="/cross-platform-guidebook//open-source">扩展</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/cross-platform-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/cross-platform-guidebook//mini-program">微信小程序</a><ul><li><a href="/cross-platform-guidebook//mini-program/alipay"><span>支付宝小程序</span></a></li><li><a href="/cross-platform-guidebook//mini-program/taro"><span>Taro</span></a></li><li><a aria-current="page" class="active" href="/cross-platform-guidebook//mini-program/wechat"><span>微信小程序</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="技术选型" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#技术选型"><span>技术选型</span></a></li><li title="渲染界面的技术" data-depth="3" class=""><a href="/cross-platform-guidebook//mini-program/wechat#渲染界面的技术"><span>渲染界面的技术</span></a></li><li title="原生组件的渲染方式" data-depth="3" class=""><a href="/cross-platform-guidebook//mini-program/wechat#原生组件的渲染方式"><span>原生组件的渲染方式</span></a></li><li title="网页渲染的问题与解决方案" data-depth="3" class=""><a href="/cross-platform-guidebook//mini-program/wechat#网页渲染的问题与解决方案"><span>网页渲染的问题与解决方案</span></a></li><li title="渲染与逻辑分离" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#渲染与逻辑分离"><span>渲染与逻辑分离</span></a></li><li title="数据驱动" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#数据驱动"><span>数据驱动</span></a></li><li title="事件的处理" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#事件的处理"><span>事件的处理</span></a></li><li title="数据通信" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#数据通信"><span>数据通信</span></a></li><li title="缓存机制" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#缓存机制"><span>缓存机制</span></a></li><li title="运行时状态" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#运行时状态"><span>运行时状态</span></a></li><li title="运行环境" data-depth="3" class=""><a href="/cross-platform-guidebook//mini-program/wechat#运行环境"><span>运行环境</span></a></li><li title="运行机制" data-depth="3" class=""><a href="/cross-platform-guidebook//mini-program/wechat#运行机制"><span>运行机制</span></a></li><li title="与普通网页开发的区别" data-depth="2" class=""><a href="/cross-platform-guidebook//mini-program/wechat#与普通网页开发的区别"><span>与普通网页开发的区别</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="微信小程序"><a aria-hidden="true" href="#微信小程序"><span class="icon icon-link"></span></a>微信小程序</h1><p>小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。</p><h2 id="技术选型"><a aria-hidden="true" href="#技术选型"><span class="icon icon-link"></span></a>技术选型</h2><h3 id="渲染界面的技术"><a aria-hidden="true" href="#渲染界面的技术"><span class="icon icon-link"></span></a>渲染界面的技术</h3><ul><li>用纯客户端原生技术来渲染</li></ul><p>缺点：无法动态打包，动态下发。</p><ul><li>用纯 Web 技术来渲染</li></ul><p>缺点：如果我们用纯 Web 技术来渲染小程序，在一些有复杂交互的页面上可能会面临一些性能问题，这是因为在 Web 技术中，UI渲染跟 JavaScript 的脚本执行都在一个单线程中执行，这就容易导致一些逻辑任务抢占UI渲染的资源。</p><ul><li>介于客户端原生技术与 Web 技术之间的，互相结合各自特点的技术来渲染</li></ul><p>从渲染底层来看，PhoneGap 与微信 JS-SDK 是类似的，它们最终都还是使用浏览器内核来渲染界面。而 RN 则不同，虽然是用 Web 相关技术来编写，同样是利用了 JavaScript 解释执行的特性，但 RN 在渲染底层是用客户端原生渲染的。我们选择类似于微信 JSSDK 这样的 Hybrid 技术，即界面主要由成熟的 Web 技术渲染，辅之以大量的接口提供丰富的客户端原生能力。同时，每个小程序页面都是用不同的 WebView 去渲染，这样可以提供更好的交互体验，更贴近原生体验，也避免了单个 WebView 的任务过于繁重。</p><blockquote><p>不选择 RN 的原因？</p></blockquote><ul><li>RN 所支持的样式是 CSS 的子集，会满足不了 Web 开发者日渐增长的需求，而对 RN 的改造具有不小的成本和风险。</li><li>RN 现有能力下还存在的一些不稳定问题，比如性能、Bug 等。RN 是把渲染工作全都交由客户端原生渲染，实际上一些简单的界面元素使用 Web 技术渲染完全能胜任，并且非常稳定。</li><li>RN 存在一些不可预期的因素，比如之前出现的许可协议问题</li></ul><h3 id="原生组件的渲染方式"><a aria-hidden="true" href="#原生组件的渲染方式"><span class="icon icon-link"></span></a>原生组件的渲染方式</h3><p>在安卓则是往 WebView 的 <code>window</code> 对象注入一个原生方法，最终会封装成 WeiXinJSBridge 这样一个兼容层，主要提供了 <strong>调用</strong>（invoke）和 <strong>监听</strong>（on）这两种方法。开发者插入一个原生组件，一般而言，组件运行的时候被插入到 DOM 树中，会调用客户端接口，通知客户端在哪个位置渲染一块原生界面。在后续开发者更新组件属性时，同样地，也会调用客户端提供的更新接口来更新原生界面的某些部分。</p><h3 id="网页渲染的问题与解决方案"><a aria-hidden="true" href="#网页渲染的问题与解决方案"><span class="icon icon-link"></span></a>网页渲染的问题与解决方案</h3><ul><li>提供干净纯粹的 JavaScript 执行环境</li></ul><p>由于 JavaScript 的灵活性和浏览器的功能丰富，会导致很多不可控的隐私，因此，微信提供了一个单纯的JS执行环境，通过对于其中的控件也进行了自定义。因此完全采用这个沙箱环境不能有任何浏览器相关接口，只提供纯 JavaScript 的解释执行环境，那么像 HTML5 中的 ServiceWorker、WebWorker 特性就符合这样的条件，这两者都是启用另一线程来执行 JavaScript。但是考虑到小程序是一个多 WebView 的架构，每一个小程序页面都是不同的 WebView 渲染后显示的，在这个架构下我们不好去用某个 WebView 中的 ServiceWorker 去管理所有的小程序页面。得益于客户端系统有 JavaScript 的解释引擎（在 iOS 下是用内置的 JavaScriptCore 框架，在安卓则是用腾讯 x5 内核提供的 JsCore 环境），我们可以创建一个单独的线程去执行 JavaScript，在这个环境下执行的都是有关小程序业务逻辑的代码，也就是我们前面一直提到的逻辑层。而界面渲染相关的任务全都在 WebView 线程里执行，通过逻辑层代码去控制渲染哪些界面，那么这一层当然就是所谓的渲染层。这就是小程序双线程模型的由来。</p><ul><li>自定义标签</li></ul><p>为了防止标签定义带来的一些问题，微信自定义了一套标签语言 WXML，这套标签语言经过编译之后，最终会生成 HTML。</p><h2 id="渲染与逻辑分离"><a aria-hidden="true" href="#渲染与逻辑分离"><span class="icon icon-link"></span></a>渲染与逻辑分离</h2><p>小程序的渲染层和逻辑层分别由 2 个线程管理：</p><ul><li>渲染层：渲染层的界面使用了 WebView 进行渲染</li><li>逻辑层：逻辑层采用 JSCore 线程运行 JavaScript 脚本</li></ul><p>一个小程序存在多个界面，所以渲染层存在多个 WebView 线程，这两个线程的通信会经由微信客户端（下文中也会采用 Native 来代指微信客户端）做中转，逻辑层发送网络请求也经由 Native 转发，小程序的通信模型下图所示。</p></div><img alt="小程序渲染层和逻辑层通信模型" src="/cross-platform-guidebook/static/ipc-model.d425132e.png" width="640"/><div class="markdown"><h2 id="数据驱动"><a aria-hidden="true" href="#数据驱动"><span class="icon icon-link"></span></a>数据驱动</h2><p>在开发 UI 界面过程中，程序需要维护很多变量状态，同时要操作对应的 UI 元素。随着界面越来越复杂，我们需要维护很多变量状态，同时要处理很多界面上的交互事件，整个程序变得越来越复杂。通常界面视图和变量状态是相关联的，如果有某种 <strong>方法</strong> 可以让状态和视图绑定在一起（状态变更时，视图也能自动变更），那我们就可以省去手动修改视图的工作。</p><p>小程序的逻辑层和渲染层是分开的两个线程。在渲染层，宿主环境会把 WXML 转化成对应的 JS 对象，在逻辑层发生数据变更的时候，我们需要通过宿主环境提供的 <code>setData</code> 方法把数据从逻辑层传递到渲染层，再经过对比前后差异，把差异应用在原来的 DOM 树上，渲染出正确的 UI 界面。</p></div><img alt="小程序事件触发通信原理" src="/cross-platform-guidebook/static/ipc-trigger-model.6c9eaf5a.png" width="640"/><div class="markdown"><p>通过 <code>setData</code> 把 <code>msg</code> 数据从 <code>“Hello World”</code> 变成 <code>“Goodbye”</code>，产生的 JS 对象对应的节点就会发生变化，此时可以对比前后两个 JS 对象得到变化的部分，然后把这个差异应用到原来的 DOM 树上，从而达到更新 UI 的目的，这就是 <strong>数据驱动</strong> 的原理。</p></div><img alt="小程序DIFF流程" src="/cross-platform-guidebook/static/diff-workflow.363b8d76.png" width="640"/><div class="markdown"></div><img alt="小程序更新数据流程" src="data:image/png;base64,UklGRhYiAABXRUJQVlA4IAoiAAAQcAGdASqaBGkDPpFGnUyloyMiIHQZKLASCWlu/HyZ3ltW+KswZix/s8SZbyX/pfCb+4f5Hw78R3tn3O9Rz5W/i/nf6P8zv5h9y/3H+G9Bf95/e/F35R6gX5R/QP1X/vPAO6P/tv+v6gXuF9Q73D/V/wnqj9ePYA/VTz7/1Xg0fif+N7A388/wXq0f1X7Wf5D1K/XHsJfr71rAw4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcGi/YXN4MngXN4MngXN4MWuTSdA6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOgcs0Cfg74UeaCK4UeaCK4UeaAovt44bg3BpzsumYZ+K8OC/2HBNl2SoXdW6tmrAhe6Tlmj2yIv5hzRVv5hzRVv5hzGv7SgGfk/J+T4aeZ2bTQoPpQY2wFDdzeQDMfi22IvdJjs0L21ooqoPPuUhUZkydA5cUNtEmYzSbI0AHMxEZXDO7DJpDw6yYaCaMZuSJe6ToHQOXFDcDAMb2b2bHBYU123pTJ0JqGgOv/n3rXAqzkbTIll5xuxh2JOoIXAHKAGpIGIAE7CEnUELgDlADUkDEACdhAidSC5yCZRCIQBygBqSBiABO1qPyItVzF/wbOemV9ipIAqd+5mVWQoVgqS7zfZyXdBUAUTPdkcYPwRIQ+117p+q4/WuAO8MOBwtEAIxZxo7b8q6owFwnUG6qXUYhS7FvlyZOgdA6Bz9yBw3DLOdA5cUN9A4bg3BuDcG4NwNKm5rO8h9/vlb4Rc8IvdJ0Dn5gVvQtk8C5vBk8C5vBk8C5j/Tm6juk6B0DoHQOgdA6Bjd07UEaXiYc0Vb+Yc0Vb+Yc0UToWyfumToHQOgdA6B0DE47krhA6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOft5IHDcG4Nwbg3BuDcG4Nwbg3A4F0e5vBn5Pyfk/J+T8n5Pyfh0hLm+ad0PVv5hzRVv5hzRVv5hzRVv5hzRVv5hzRVv5hzRVv5hzRVul9Pjr/Q8UzsZX08zwi90nQOgdA6B0DoHSiTNca2ClPlHwx8MfDHwx8MfDHwx8MeZ+EXPCL3SdA6B0DoHQOgdA6B0DoHQMT4/SMQPHz1cKPNBFcKPNBFcKK3Oufi5nhF7o3IHDcG4Nwbg3BuDcG4Nwbg3BuDcGj01bo8UYBzFGfGcM7F1ukMnN6yP1T2TwLm8GTsiFe+zvD3xczwi90nQOgdA6B0DoHQOgdA6ByvbJipAD/MdvkkBrJa1F0/B7j7G0EdDHIWI39gBr/rj0yRGQxXorgUc0Vb+Yc0AS6P4EL7sTcm5Nybk3JuTcm5Nybk3JuTcm3+oPipA7cGWVfF5mQ2uTJ0DoGih7GSahepEvdJ0DoHQOgdA6B0DoHQOgdA5Xu8nOlIjwLm8GTwLm8GTwLmhqevKhFk3JuTcAusOwZ+T8n5Pyfk/J+T8n5Pyfk/J+T8oftXX5dLRK0SR9Rw3BuDfQOG4Nwbg3BuDcGkTAhBFXCjzQRXCjzQRXCjy5nf4+oZ+T8n5Pyfk/J+T379usquFHmgiuFHmgiuFHlRAlgZ+T8n5PxK/w6UI+JpVogbjnMAwDUwgBsZWrYt5Pyfk2NwHQFiSP5RIeiJWaGoXuk5+5uiACN/3qAANJyNNnUNcCG74CYQwLdHDcG4NwbbOxH1WCFKGDCJkLKLsn7Q1KS2/NqkPEY3YOaZ3++/gnB1BsD7T+m5xZW7xbd1vkIrLeOgCPJ1EiT8WIXuk5aBUCAPG0/jgpOomG4NwbbOxHC9//p7kBhpiVVveMdXaYg/1NiK5FjQ6ubOP0xkwx9bdaY3wqII7jWjzK+BkjhuDcG4NwNKmp5aeuMQdOJo31HLntOA2/5ytXqSIFmoZvEJmmyYWbOZoTFbbQdhfRpAGFf1oS5ixFOkwaQBhX9aEuYsRTlw4s6jKueFidR7kJaA/SnO7IXgQRUTH0RU7O8MIrbbOxHf8aQfnne6ENnvDj6EaBlUfhxBwLrCYXK62UtRtnipEvdJ0DoGKyIqZZzQRXCjzMNWRDpsNXAIIMnmCbD+AkA+3iFBf/i4JAYlbiCLwiuFHgw97hcoUeaCKGZuf0gLAWAsBYCyIY+GPhj4Y+DAsBYCwFgLAWAsBYB8yCK4UeaCK4UeaCK4UdkydA6B0DoHQOgcqjmHqEXcG4Nwbg3BuDcG4Nwbg3BuDcGikFeqfk/J+T8n5Pyfk/J+JSr/J+T8n5Pyfk/J+T8n5Pyfk/J8Ncxw3BuDcG4Nwbg3BuDS9tSbU2ptSxwqLD7JK5fAiuFHmgiuFHmf/no/FzPCL3RuVFYCwFgLAWAsBYCwFgHt7xczwi90Z8wr8rS0StErRKFXEzlCToHQOfuVFYCwFgLAWAsBYCwFgHtrTQbkZhzRVv5hzRVtbM5WWnEXPBAbLSxiOwNHEzu2UNr4ljUHfq3K2wNjRbMvuq4UeaCK4UeaAtvQDiorAWAsBYCwFgLAWAsA44VjPmVXCjzQRXCjzQFABwwiuxNvxtHGdsu8AaZSzgDMsR/LRrcRerPrRH0YREgV3gkoRBH6jUxiItgS/IgpLzPCL3SdA6B0DoHQOgdHZk6B0Dn6G+08zwoUS9yQIRZNybk3JuTcm5Nybk3JuTcm5Nybk3JuTcm3/Co7MLo5oq38w5oq38w5ooW3TpZCToHQOgdA6B0DoHQOgdA6B0DoHQOgdA6B0DoLW7Voqcl3dDD7ugdA6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOgdA6B0DKliNzPCL3SdA6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOgdA5cUNwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG4Nwbg3BuDcG2zsTcm5Nybk3JuTcm5Nybk3JuTcm5Nybk3JuTcm5Nybk3JqypuTcm5Nybk3JuTcm5Nybk3JuTcm5Nybk3JuTcm5Nybk2/D0/kvH6CePUiXuk6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOgdA6B0DoGWc8IvdJ0DoHQOgdA6B0DoHQOgdA6B0DoHQOgdA6BytG3fvZlKQeaCK4UeaCK4UeXUBmsoSdA6B0DoHQOgdA6B0DoHQOgdA6B0DoHQOft5IGogCUrxGIN6DFebyM7UiGOkBJQ8KQIRZNybk3JuTcm5Nybk3JuTcm5Nybk3JuTcm4GxqSwcalBcjOPwOQMJicGiEbRgqW3WKzBPiqgRe5ttnwNe/90sxaaVKskBe49veLmeEXuk6B0DoHQOgdA6B0DoHQOgdA6B0Dn7eSBrUo7nar62dvFZx8IVfLf4JnnUM1LkiXuk6B0DoHQOgdA6B0DoHQOgdA6B0DoHQMTUVaOZxdsLQRXCjzMNXCjpwRSSNpzgKEnQOgdA6B0DoHQOgdA6B0DoHQOgdA6B0DoHR8TNca2ClPkpLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAWAsBYCwFgLAOAAP7/zpwAAAAAAAAAAAAAACidLFLu5uMQoQmkRSq3QBHYdHnZVVY0oQnIdz0nbCKha/8iIKS3CShNedBiDI+6QkCJeQylhVJF1g3apFx7outCGBJ3C5X+/XV1TAdBb8WMR94nY/NZiSScT6xhX9MH/od9j7qiEZcQ9Wi/LkGffN7f0tW5YVWr8DW2B/Z20Gjf7IuXcohS6/g8qr6rZqof3kUi2m3drUPcgELw9rQ5uPRbPmi4qbah3Yb43DIDchxVJUsedr1v036kFSr5dJjk2W9g+94TrwmvuJmAj607FAP/ALrB3iOlLBQYhNCcGuDNeMDlhg8vhGvZkAo+9IFPrpLbYHwJ6X6aa+JpMp9sVK6rsNGpnoI+ZY4yd5TrcAO/G6YkncAFGgK3N977evXqoUzH+/NE9lyALnauVaN4vKQt8epXf2jQ34f+BidP4YM98f5H1v5vRwE5sb1Cxz9Kd42erM57aDHobUX0/k6HjiFLG0o3tBo3XSfhebra+4y0Dd8bRYpe+Zy+yRdEh8KUBPcuAzPLY+n3M9R+k4ftN0wgz7b+3Hb9oIoTP7QgN0NaEXwKh+aILaS0qTa7XZWlei+89qfHLbG7S+deS7DnhrOxW7Qeo3utXgB7Fe4d7HMNEoe3rn3igmJYrIe5421URorOU/2iggwd2R6S5KiG/xR8sJds/ZapC79KB1gxIb7xe33KQXJRtBWQc8vibVeYH94j2GivkUCe+4OxxvRCYgOq4sg8KzQM6XMTszFN9fmh/XVei3odJg0Q37VmVBL5ofT6mPUCHa8aIP6MhifYDudleH3EMDjWZ956pORkh9lJqjf6G2S42/5iyW0U7s+Mp/CQ4osoTwy8tB6BVdVnLLvPybpuhEGSXv+jxltZbIa5LdNCf2rlL6BZgJBdc7ctH2zZBh5UHq9OKfFFxk7Lz+OSRBkGJ8kIaPu1IC+Kb9USZP9e4sDWO2ILZUUL7IPnPgaXxvin1VoSUF5rGbuzupyaj+uzupxT5WusnWQA0nusnWQAzjNTh1PcaWgZvXPcaWfZ9MIqITM5ztIqITM5yw9IaX4nkYNjDX4nkYMolGmfA0vjffmfA0vjeoFGmfA0vjffmfA0vjeoFGmfA0vjffmfA0vjeoFGmfA0vjffmfA0vjeoFGmfA0vjffmfA0vjebTmvxPIwbGGvxPIwY22CohMznO0iohMznKNyFRCZnOdpFRCZnOUbkKiEzOc7SKiEzOco3IVEJmc52kVEJmc5RuQqITM5ztIqITM5yjchUQmZznaRUQmZzlG5CohMznO0iohMznKNyFRCZnOdaNF9azR6ryWIcYrx3Jtj9l5TEhk7H6Vx+U7FYkuY+uFrMix7vqUbjjv/QGdnFpWDhV9OvSc3RbkIjrUzsx0RjFV1+QkGzXmXf5YIMRfTpNH5rqzXTEvPyFnohhZti+hweICMW7prexzUZxtTD34QrdaUqT7QMDXeeSwwSCTSRlPhcEQo5F118STCB84Z41WaW0JH5hqwoKXyQmwGvP4FeuTHmAZl+OKcDnSO7u7YrXzUm3uPPPJ1aJ+runk1TLPA/kiZNdwdCjSPYDFQINS9UN8MYP+xP0zp1WGR7AtPz4ZWtxaZLHkffQf+hg/ik59Fde277qx+KzVvdiQr0VEyXiiR+FYR5qZkuhGmCnghc0kpsY69n+h5hY0WzwzjSMUPMSFnR7Fk/uUtcRHYCSSCkzIFkjdRVPFyK6R6grZpuIcX36phRzIBlWH5LoN5DNaYTCci8Y2y+KX56xUbtyItID76t7t2ScLSyBkKJtCpi34r/AT63PkHJpMcCv24uG4QicZQqphC69pa1oheG9aNv+2jNE4gUPeU46y9TTv9ccbbt5tZt1k2OKxkx9CvmTf6t3y823edAQgVo+vF3kSsdMJaOU41+c5TVdhr4cCjBKj9UiHzRJz+yE3NhxlCG3UFicGcwo8QAzCaTSHUS8Gs1rcEBPgd7zjfPERHRCu/81jNQJKODpgfNPZYY5mOKGRZk6r+Xf8MdpPOH+fm5aL73jkM5C1PZ5nbh7P/p2XNtHE93Tvoe8hLec/ADHavECsGql7sWYGTv4rPRXm5QW1gJcy5MeR8XjvOkiMMqGTCNNFaR9bz44vKg85voRgnNCc3WMt//mQnR3ZMDl4R1jeGmRjNz58u4lWYCSrzSgAdjAUB6LdQR716evUhcwba1PQi0CdMAeCaaiqcjjd5gtYtcwCYEEn9fC90nTjR9AVGLaug5ScIfoWOlalqRTCjqoj18Zyev3xgABl/QCA2xBMRADFKDT43nUwsLUm/T+CO+yfB9sJCauLseAx7d4fwEcACsEsjvijLcFpX3auW7hxrPYomZm4/IAE7/7Pwlm1itaQAAAYsrbfR3ZSmUVfjj5tdZGBVJBirOryk8L4d/2ky6FIdUWCMfddUA8kzojkXrUdFtML4ApRU3pgp8kXRIjSHeoxR3zQbsTAQ+C3ws5eRYq/kEbLiCLK773lqIwHU2kXQLwUB6sjjWruNNYkbMxO0ii/dswKYDUzxNarMceg/FPO5mvQ6mi0l6x1w6zkeKa2hpUsWWGJLHRZQCO0UaUxJuKjZo2pT5RYjZ7FKqHT8uFtQloTv9btUWaXCh332PU/U7zJMhukJ+maGNW/nYbXXep9bQRn1ecM4XoBhxekMsMtDM8JHOlOTz1cgGtETumr/7/mnL4yho/De7etbiSR8YN6p7Pvx8IeIpeiqy3cBBHg5wUKb99zE7+fx373O1uPn+calE5sNZO13nq0iSgVFd08uuvS6RLL4QRf7uD/raMqxzmv6GPLA7i9nuYnRBSgaVbOMPSgN0zRoDTmgRRoVbwR3qVnZ1vB8ZCPJ5SDY/R6a/+kiFVzUvbL7e4RU9jbO6BqvtdP9oGkOq82oYrh0gpSwGQ7aLo6ghZR0HPW+lmbAdUy/31Y00LJ2LzczvYXJGkkKu8p73hXT1HDk+pOgAACMNBijF2SWUd51FUr1FcNajP5vhlIjuzPHakNWfPEEVsrqBvylYb9oG29kiEEXawC1KveAyhjxenVT4pAztyScJ5FvKzhAAAGcBFGOMIq7odiI/T/Y9FuNhb34hAdGbwiwM9lQCqOLi1hQ871rocEB9+RBTjWnS1VcL25r7iZgI+tOxQAjZ3isicfb40JoTgAwCaUbZFNK9me1n5oxPeuYpqQZx6X3QUNnR5nFyiq2lwx6T+a/VoGVe0fFVN94O4HwSN4kWD/mBV3NBigZqsogoFNoe52kEnWC2S8/ddUH/JZyEbH2dXm9orFhd/t4mztt1ayMvmRJGWK3xbt6RcztqXzNLolfKV3wNDohre/edbDe7+VApR4J8ORGF1RVLW8E2nT23p7pH0SLjLlft9/R7N7ccIe5okGN8vejYr/gZ6LIsKPuXQavreiT3TWojDGsO/0weFrZMIobtf8ZAOBvBVL6nryZLqb2tAtNr35/wYIoxaXwQi4Vt4Te0lefDGbvun/X5r5eWRAO9ZavIwSjPHtUb1FVEVs/0uc5bMU/A6RWRZ0O1Z1xwduJiz6w6b8gSc2UHuVOjHJ8Q7w0DzD36iJkHnzHcXNXc5rE2pbn6qJtCGPqmTyTZEY6hpqCbvxsfpYsxSpzN63JF38Yzz+20feFEjlp1wkIfUlRsaifma3lwTy7wngjumXjzRYluHV+Sg46vRmeXIRMdhzV8aQQvpnvJqyRJoIjiB4r+jV3EX8i6i/eKwWEb7gV5WIUsMetHF3hvIl+iN2Qday0zP7irCCv7zexxiOFBpq3rlVZKSx4bHYqYWwvw/fbuhru4VfJDtordxOQBTtRNXTqSvhZshlKJskPu09nCKz9Ieie7OwnZW0yPPHQcBIiZjur+Wwonkg7AhYp56oVwa3kxkxuMew3q93a968+fSUCx9iLzh5DAQByieaMMymVS0tBzUk75I0yYIwSNvjvRVzNWlL+Qaj5yhtBiYEH0PMin8d6zQhOZp3RAN3fA1WgbGkPoxLvU/T4lWf9Ue8ZxjVn/Pm6Hg3xQWeGpi8m1HCJVXqM2DQE6qlE6uVP7KQ1Aam58IdRhkNb0ATPJULvYO8ZDUDANj7tmZPfbHbweANzSrsKhPSWdQlZH5t4K3yC8K7ypL+F5Zx68C7Q3JtQu8e8fTnm7bb6urd4PpyREiUQdPiArssFRmPx5/cNKRbGQCoL23KJNuW7pUCbgR/BmT+Ro3LOArcLeKhTrN/9fb0L5qJnra7d20U5J5Yl9rHCPlqun/kaxJvH3vKfkIOXzocJCz0UF2v1CkIV0vKq2p4BwMRDIa7degvqhst5ygAbfMl4r9Vv9h0+v8/1Gup5t686jCzO1qgZqUrcg+5nzind9WUGpogyI4znyC3tSanlnffIX09v49dqvEmI0PgxMwaM5tcHbjH7ulYHMfFkZwn3K2rNQZ/mODAgc33nVcUVLg24ucoG7fWWdVtpbPyNNKPnlDK0KGju4nclO2UKWO728w0z3JbE3gDRlVfdRxiiyCozHOG0BqSoMDxhAyOQCG3IJPWDjVBUIVs1oVr5hkACd+u4FyUiTjEM6JQp4WN1CzOOm4yiqixSLlzlfdkEcdTGO0sG+yEArCQvIGucKsnytIKnTGs5gNk2fqcTQSo4Upx7yxpzElkoFq5guxBpsya5ILXM1wic9rRYLOBy/67U79MCQXMmcAy+LoXSWMMtJHvGzLvUBEQnx9jvTSWOeV47STITl+z4rlkNfbJ/7Zj0hhtB/c/zlZMiqC6WW7fMVGvgK22aKt338Pbx40tg+FAecZGfjXgkikaGF6HZ5cViEddzMw3QBkL5DXeMXl8iW1rDbw12AoXOcUTkM+440jek84CXUT3Pv0yFiccP0Hdqp1c+c63Om51tx0u51qc00SQfXz3aXeV/ggfv9VipPob68hilWd3CGhH6gGitTAg9Hr7tAdKlpo5ThTE+qHWT8VFxsoRg/tegD26eIsdhD+wdRHBc3nxbAl0J28EOUcD65FT6WKVocD7SeyeGUD1HqTx5DHnsPnIcR97SI0iAo+ipfhQvwnwoBSHuSwqyvANlsLQ0gInI0FCUEFrml9CDsrmzOyxqSzObe+qRWJJaGkBE6RSQRx6WVd5rdVw+ILw8UVj7pKFUE9sgSRiguVrOioZHIvDxRWPukoVQT2yBJO8FpXt2J1BqQqdSIxgstRH7XyvFrqG1MRnA9vOxxNMRIGslkvq/qg0gsYjG7NsqyIDs9vsYupImWrzmbNRNOLgjjzvUog4szm3vqkViSWhpAROUPdbEHEmnij+eMojOyffPNLvMVP5OjkLk/dmy87HUvpiJA1ksl9X9UGkFkqYCKpKu3QWBmEZ2T755pd5ip/J00YJHK8zBZFRoJU6kRjBZaiP2vleLXyjFbiTq/52PT0gxEgayWTAB6sgvamBGFz7SRuWuqHOPm/GAt8sCpX2MXUkSErF2lcJZDEL9kboxI7fal+PDxRWPur131G3Y31laXAYi7RSduTObe+qRW6ax8cg7FMTH8oVbPOZs1E0rObe+qRRibOMiNMTHm9xUKoJ7ZAjyulFvBpW7uflGFz7R4QRJaGkBE5JfYxdSRJmQXMTK4ZSiENLQ0gInCDCQuOC72E4xxVvwYmX97ycuiYKhBiCT29io1U3RNoeeXjxmpGyUKxcA8G9/jgkGlCd0WT9VaC1LBZE/mR0dx7l99Kn+UTKz4sP3e6SGr/neLthT4YPKhtvj7ZgqvKRCEkgsb1TqBV8sVhXbYrek4LWTR4i3dJ/vlBWr/kljb6faJRwnXcvXAU5HADQDsqdykiy3XO3Eo6EhKiiZbZIOrkAryEgkyJ36rVmKKuGTpOZwkSAOWfMFmS8KyC4saCoqa/aUvjwNUPkWvZHzj1KffNYeAe6ny59wMcc/654POeWDcq8BVPXQABUPNaT1nfmZM+xst3CLOugGFOcbJvRoopMAAACAPC0hHOHgCY6f4mwloj1w6Zo12AfddUA8kzojkXrUcIAvFHsSVTEcAkDkouyeLErRMcEvMcONVQlD29rWHQ1y9CyZLj6MeL1zJFJz7PP8XN+0S1h3twcHnKDRDp7IJcpDGSPm1UIhf3jcWZmuhCX1QDSwxgwONal1RbyLwDMh1j6FA7i/CcX0y7+PKcuz/8kcadG2oD7EW/y480ZpatzvGYRPTMODXkP5+GHEVEFKdxGN+ZQLqtFGGGq8UXaoeDbgBRFT+biICenO1DSBD9qoCdgMhwmyBwNlyYOc3dzReoMqmuEMiJhxL3qK6WnZE3qdW8GeS1+w6Nj9Cu+hN7PZ30A/v5D31E0ig9E4TwOQ3Y9jFcf8AA14fcWhdPXoJJBRwi5Eit5KXR7n1OwkOxQMjjBK7WWRWTp/Y00m4G2P0M7/h6737a2bq9JWPZmBxgbkkqTBnHYge7fYQFJmgyAPivUeFbarvGpnGOxfdkeH6htemDo0HPd5EqLLfyJa/KTWrxVzgVUp+LyNcg2llUh/04HR5f6T9Wa1v+j0xay9PZDa9fc6ggO8ZAZMxQSkcIPuO4Gtwxvc+SO47CGe7o7fPOiLfKhgRtxVU0c9aC65mEMAAAAAAjCtAwvVWmYI6qA81KFCQ7uRGLPH518SHIcYpfMD65uO8aE8qAAAqstmXSaaRsEIAAAfeQYAKrcAAAAAAEyrKRzvjV7HBPIWS8pZUacMRanP62dyZ3w8RuieQwMrKwAAAAR8kvspQi+eiKjE/1f42KAOrDtYXyWIdw40DdAVYABkDzV9yJYzadHBvmMwq9+1R2SSHwuQm39NnK/klfuK4ZA7wfX2hWLWfY43V8BJprjQr+DFAWIf8SHZtmXCSfNZUCWwiw0Jgd/v99WKsntbch5FnM/YaodrYE+4UY5qaHlNpbUFWBoF7JGuXIRaIwLpJE5Qf8ffVurBzVyGDnt1PdMn72c01n1+D/FbDtzy+tIvi8C0/dYGxtI3ny0PKJBFUMTc2IACj2T0GzKnVDiSL6TnH7IkORVWCAhxEhah/qSH1oLmVLmwDIIqUWfF1kQVWTamgigNovh8Z8E2cFSptLv3Uf/r1FDpZhH1YPhqH3iFIzOImBOxppsB7C+GWMs/lv+nRtV1ux9UlPDL0Dlvp4I5jFLPkFD1aO/u2jMR7LX4WReGfJ1K2nLZVBiYCnRwtrde5ILno1LbLU5ttwY7qoTtXLkRqFEjF0suP3XPLNh6HuLlGe9+Emdtf08iZgiWn4cmItcMhZIol8AxOSZ9Eitbg/jUlF15Rnd2otbPvPJHZ0ZDuWp90U6R4AsVM7OescVtGU6SOntm1Yu0DkBNkhsk0O9gMI4S5zA2nSOyGd+DVtqRefrhNbh3FATYUUSK0vLu6PURJhbxBSM7lbvd+V54yqvN8FvJN3g7VgAGMIShH/SE7RyaLy/zr9Fn6KA5uCPverHEcomecIZNeTyyqn5Oad+fwgSairTMOFO6NwT0e/+7KupFSW/Cwfq4GrkfrjclHcjkouUJBdNZcmCCB6sNDuJv38D3bK+JBAYX52Wp4cAC16LTahogIsQH+wfOlNz2/NWDw+uDlQBvxRgRJsbE6CPpL1lyQXf+5u0mzD4UadPcQ19jqXz821hclot2oGyDJELoz7sAAMA5vbfjLNWjOBzV8mHngAaNdeTfKLWFibMwAAAAAAAAAAAAAAAAAAAAA==" width="640"/><div class="markdown"><h2 id="事件的处理"><a aria-hidden="true" href="#事件的处理"><span class="icon icon-link"></span></a>事件的处理</h2><p>UI 界面的程序需要和用户互动，例如用户可能会点击你界面上某个按钮，又或者长按某个区域，这类反馈应该通知给开发者的逻辑层，需要将对应的处理状态呈现给用户。由于 WebView 现在具备的功能只是进行渲染，因此对于事件的分发处理，微信进行了特殊的处理，将所有的事件拦截后，丢到逻辑层交给 JavaScript 进行处理。</p><p>事件的派发处理，具备事件捕获和冒泡两种机制。通过 Native 传递给 JSCore，通过 JS 来响应响应的事件之后，对 DOM 进行修改，改动会体现在虚拟 DOM 上，然后再进行真实的渲染。</p></div><img alt="小程序事件模型" src="data:image/png;base64,UklGRlIWAABXRUJQVlA4IEYWAADQtACdASqpAj0CPpFEnUyloyMiINQpCLASCWlu/HyZiqSPxrbemWEQW9j6H9AXoV8p/oC+YDzWv97+yXuR84DqVP6p/ufYA/bT06vZW/w3/Zypby9/ZO0P+0eF/hP8b+zXrcfx3hT6n8z/5X9mPw/9t/db+3+4n+i8J/gh/e+oL6i/vPiW/UfvaplfUC9X/nf+q/uP7bf5n0jv7v0O/M/7J/dvy6+gD+Z/1L/TesH+68Qnyf2Av5L/a/93/m/y1+N//k/yXn9/QP8V/1v818BP8s/sn++7Bf7q+zF+3AaCTiXEuD4XzVZJ6Y5mvw8J6nhxzaT1Nr4j6XSv8wV244mTkmjIrk/AWNCL1yIOixCa/fyegZGpDOSWJw5y8z7SMsU3ggQbn5U1Bym5Nybk3JuTcm5NyPuIu9u/nSVQzwQ9UTtDamXPAwdlDlc2Q4Ky+3562UZJ42AyS4YQEIhcCbarQAPEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLiXEuJcS4lxLg3dnglxLg3t1CsKNDdm7N2bs3Zuzdm7N2bsnim5NyPdiSTEmJMSYkxJiTEmJMSYkSsQ8S4QsAh4lxLiXEuJcS4NgA2npK0uRbDOiQobCamGVC+Er2BRp8DI3VMEDj1syM4ZAWRCuAXsQS7EVBCB/HozwRG1YEqbbTRWBeXHqZIirFOFleLw8fBrAexgHrZarShpn6tl/aD4Risc34/98nYEnEuJcR/JYXcShO4zVwBWRXjTOuIwuP6SCRIIAUicNlfVSRzim5NyQcUpMngcg6q44Z+5yNIS31jGL+eyBwfTriaraKjOK06+IJMYYwxhjDGGwAkw9n8S4lo1YjDxLiXEuJYF6LGKPgfn21xUqHZVfUH59tcNrqdNUgJy8D8+2uKlRbfrRyzYw8S4lxIPA1EDlyccDoHQOgdBOyyTEmJMSYez+JcS0asRh4lxLiXCPh/NjcG4Nwbg0xdm7N021rN2bs3ZuzroniR3IkXKehUikUikUikTwNv5TTabTabTabTaU1TMNZZd07UajUajUajUaHT184oJNyeBg1EWq5JiS7I7GHiQi2KsCTg1Em9bWTC/7N7jGHiXCHC9RA5cnHA6Byw6GgTap5UG4k+B0Dn7hbNjDo1YjDxLP1O9bWTC/7N7jGHg4xSRsvc6tZv/4pidSKRSKRSKRSJ52LhdFQ15OqbScLfdJLodDQJtU8qDcSfA5+5nImmaXEtHDuC9JkDHL3G6m2awaiLVckuzPVKQk6Xr4PIbs3SWo7C+dcmQMcvcbqbZrBqItVyS7M+GcwxhjO+tmfA5YdDQJtU8qDcSfA5+5nUMweq1+wETTIybgfETb/y51HiYiPU2054NtoEVHUywKggKtMZ53NvYwezP9UEKkCL7B8A53fKw94pB2LhuRkJXSZZpBw38nqaqTIGOXuN1Ns1g1EWq5Jdme/UX4q+BvekP5g94yL96pxw+XpyQEb2+2NGONtH4/XGhuqsaXc4F3vBjDn6netrJhf9m9xjDwhmIeloM+FCOUl2Z8Dlh0NAm1TyoNxJ8Dn7mdRA6B0DoGVSZAxy9xuptmsGoi1XJLsz4HQOgdA5+5nUP0hCYxh5hUm1UxBuBXNcCNwCph0ZkcjkcjkcjkcjkcjkcSPTYYkQdGr/p4N4YOgd9bWSYk07HY7HY7HY6pMPEr/p4N4YOgd9bWSYkxJiTEmJMSYkuh0NAm1TyoNxJ8DoHQOgdA6B0DoHQMcvcbqbZrBqF8bE9iQ8Ka5GZHI5HI5HI5HI5HI5HI5HI5HI5HI5HI5HI5HI4iN5JgjljDOWSIIYbmYTd8GsoayhrKGsoayhrKGsoXWBKIj1NqbU2ptTam1NqbU2ptTam1Ns1g1EDoHQOgdA6B0DoHQOgdA6B0RnvGGfuvy6WiVHhJmuE5eB+fbXFSo8JM1wnLfIMCfgA/v+CMffqc2U06A/6cVFqsWZBY51EtZtU8O3m6lz65V+6Rj6DJOHaydAyy8pRbpHzEtmnAsb7JQgnq4pjiAKzHU+JvA31lJ/jt0kRXQQ6d8klpt0pIWwslSXQ6f/nDN/+//RZDG69YcruEHMxF783hytXDOOZHU32digkh8hYaJh+OS0QiOi4XJeW+l5hYTga0c0yIQgVQ5urwdCt1LjlEsoELDWFZbHzePlI30FRTCGpWvNh5JVtYzXGcXHAI3CpaBMvIZQ1q1v4+ChI9ZjA0PPRHOelD2R9+46lCFhQ/l93tTAw09tdlqKTe9aIB+j3i69DIAFKhJf83PFLHPFlnqS6rh/nNMFUO9NCHac+yuJ7PzNQ4CSGZhgpaxkfZMwTwvTyQ86R7kaZNHOZnro/42gEheyuAs2sRovIlzllXSPnJjm24qB204LwZIHzPXkaQllAoKGCFwt8TLRih4mY+IQLKy7jsAZMDg1GDKw2QhVxjPDcZMNdQ4C+ZQ4adg5aNkeaduRtyt07lG5UopLumuNNOJGXYC6EH/9Dbdq1aSU/A/eq8CIPzZfs2Qk5jeCcLd2vqh37dAkgYuqClEWJRyJ1fKRsa5edVMChOjv5R+F/jKZSlJ/jtiZduul97aMg53t3ng1dnywn2nnLKquGczYpZgsn+JtkXauAKpC9Etc0ZSNUK6GEcWRwuOyAKOIGbSx2YR+HPO8aBG4d04s4LMEhN6BVdHjPlrVTgMJx7ff+O1p6V/zwfH9Ro7KizxBfGoHGzJ3odeVcf9yqzo/h9Fvwn5818AerRjz5le2vUztBFv6Woj+QfnYT0ITGFhitRMoM0pZDDaaR0O3VNpzceW9hgzA5a4yBg9fqmESKShPrdEc0LAtWPlEX7gKI35TI3y/9Z8P1dcIb6imcYLQWAJGrVOWMV2uHa8GibB5tNZS7aHpJyW82ZHaIaSqeeWrTn+hcluAl2QgpGQoNBqM6Tf+ZOgOmM07u+4WzR+w9pMrzwsAtzujl7SThGs2zKb4ydLmIsemzUkwUBSlMMxWeyEfqUNqKAJNUBSR4lEttwjc/A4Y5W/pppaTGpPf/5ayCTxb2LmDDUgDwbEWbP2+xyZBx4nGRU+865kboPoHv+vwb/UxsIWMX1IRLfPVLnKW3ZLormMzJj7nnLAHm7ojExo0d9+sZZneQnajEewEdRPg0ANO3MlgYfcF+0tyjEdXB1KxmWI1HNM4G9R5d8TfTgXr7ApowELBRHbsenquk5zQ4a6w+aN0qs83rLieqOwaAdHx9mn+oO42njPmCyEzKMP2HZATpr40DjwnviC+dvlzcUhd2eeCjBGdvzmLoXf2JmQAAAGfArdqnDCezNQuLyPjMC6b/JkOZ49HUdk6V1lMKkCkTrnbirQIFR40KueNb94aCCjCj9heJj412b3i8alsuEvlAXBGKssXowADnPtF44mACciQJFG8HX9RcjsvkFEyvuVC16fRZzKfaKuHgC23KJuu2MWGaQHdm8jgKq4J+12ERakK7VZEUeuie+L//MI5KZ6IHgEdf+WbpJzQALX8mS2UM6hgQw9z3v7kwz4QqHAAySdqsCRarnntPzwd7AoHKNezjDTxEUrwc0xnmll5yLO8oQmK0foEiD15gHwQiMxf45KrMwGLIkfmpTUBgEA6hRw3RqV4kfcP6LVio2kUYfryyFjD+OZ+zS+vL9NYp2A2erAKLJRRCnepyZE1F+cByqZkTaYZfn1LB3+FKtDIYood+YI9KqqHoCSL6TIGtlDZtVjN5TjDMYfaOHelj+Jn4lWSJjGsDAjRKut9LWQk0DSYVILC4HFP/f8G14IcThUDDrHcuauoPS1CKOhMw2tlbGt4kG3Z7u0IBiCOz/OiOglPUtUn1e0VYqt5wZu72kAWczzZlk+FzmZpqBJTT3d2sJLWOAEAY+HuzI7BlejxESIOSjDOz/RMPlxQzpZ3kjkCpZeb+3TJPvm5Sk3VO1xdTou2ydtPkHBWeVfk4xnltSI2jjzrAoess8DZ9JgH0lFA9bB2v2SjIy8ONksBAi1/+a8q/3d151aVKF0OodRRCpk9VVS4J8GfmHooLdPbVFFIzxmKm/OTw0kEYf96qPLIhsIU434bOL+U+OIhitKTtoBD0eWF8c08aq+iOLrHpVJOSwisXUW6IOD094TlJP1yoQdKM3nQS7nTrcjEmPRrsM6LAD0dNyWUBS47zhXW9ZKgSUq4XT3iF+wY/yoPmsS+K41WaKQt+DDmxPt6NFJawQuBdDoqvy2Y4XIRgEQin7Zmmd1VNT+KXrsM8GhF0m7SMZLSC71CfM79fEQa+5ZgLqwGn1iUPIKlZTWHUZAqmlNXOoQk2t0s11sDJj+g2dDw3xNmoCx4NEvyv06As9BkLlGAM1ZihKC7Os2LTVi8I9j2A+uoYqrhDCJYaoOGt9BOcNIaDGUA1xzJ4OMUeEB0GCy/rWwN6+z/d/yNghZHL3WZOx53T/YcMdmOedR8SaRO2FjwAqvqyL+9S/gjNYMy19KHi+2Aaa94fi8pZ8OJiQOuc0UWqdR6AyMHGlbT0c/Lc04HcR3c77Fbv+LTjVgwK8CMl/ToTJsTqwJddD8i2GFTLOLJmqA6SjLEGonjbiUx6YhZtN+RAaY1TpYrdVHe77Z6Sx10tbGz3Nkgz6+gvQQ/6HXC1l031SXa/4t3TwIEh69R3dFmQC1Ij5go83/ZLC2undEl6DJdAzRnuBuVH0kNwiS8DH68S+AN6tGDekPmMGUIaCp8/rGtoQ80yHNBIXBVfitDSCvsOyu3GmdTr5zZ0OGFH1EjYJwLaSHn8UTZ+17Ophk5YWwqY5M8TnwK2gNuIvglO2+iPatDIdd87TOmyNCWfX7Pdn8dEUES+yfxbRfyzJ9BSp4s+/nMILmfDUDIriFNmbIqPG7vfsFdzeXyUiYStSj6ez6UrT88ZhCS2wgxLnVdaH7S+45XFPvwuDPSiqIHbYmVAdmvaeQGouhB3NbzLGfPK8mJZ/5uJTYU1Ry9jn4LB0i9JUobgyOYsHVJI8erXBpveJOt31lMAiD2QUWeErBunMIzdwuRRcy+EQkzt4BGWdQ/cMFUbDdEoQCDlwEN/UV8EF9aEQpGeqsbL9QDSnrQu/dc2Wlo30ByD8/JkQGc4gxpSku0grbQgdz8waCOjKcZJDMtayoEQskJk/lc94q7XL6PEfkAHuf5PvEHcuhNJTddl70f5FMUgUv1198PDZ9gzD6/b9KriNqu0ruGl6B/g53nh42+er2g35LlfDa/aqH1Y7habRsJb7uvU0R61jjTVQDXYYSUFJ2kQnqX5W27NBorezpvxn4Ak3NP+HDEFUwztJwOfcEUYoFCcqIaj/AuR7xj6qLBzRqMos489MP4wx6O1+qR6NTvv9134f0ivuDnUWgV/yhULASz2JaB+66wjmM5WS/oDcDCIcmkygfMgJPPLHI4Cbbzq185cyPnFXyfjtNClFgnFzHDABUh94a1DKCp/D/TFNWCrHErxNs5Jtq3ZBgwBzAxKX/3gsrvMjmuyDgBPcQRy8pjDt/+ZI+H+0AH+JO27xLVO51u0k2eyd1bhKvaoFj/cWbipjRPDOzomJlh9mshpDmmjLqQTaAAhCQ7L/1Jm7XNwWyxUchUfi3oP+eVA3SZylfV5RFYguE9VjJp762PXK33aj9bhJ7UlpJvsn1+AN1Jyzq3kfGF0hNsd6rIbAsqvt4EXm08ElXCapnZWzit4oQuNjA4QKdN3EAYoAAKWauTUHyHn7FOM5CAP7SREHqzWcwAtLROsbs/f94IxgIYUnbIsyF4WrggAAAAKxkRnYQ6qyrpzDVssDGh2usPfS/rueoW5eDAwMDAwLkRi77eAGHPPt4GBgYFvjESe0mAWkJ08DAwMDAuUzIcabRuBFfoGWSdHwCC/x+8g60jOEwJDczgp5QByAQdJDgImRBHT90zLcZJBIJi84ytEeHeVAP9/spgdZso1pNtbKOOSSWpAekMxB7TN2Agv3F8ASEqgxVMA1UWFU3AzXyV+5fwEa6DKBGhYM2sX40yeUH2wY34gwodLEyUgMCCXaUzAqRG0yNDfeVkaZGda1xB0kUgCaETDylGnj/e7d/xbuHZ3pinJqmGWRW/ucGa8vcnn9a7F4o017nw3wH0ICu7RkMA/ry0mXj6+Hldlu9oTK/Hz5LSRBHUpc9DDw4kfWWJkpAE0I1ncDfM4gJQfajgxTXoAZhGksv8PfA+cL4Q/5DRzC1X/P6+jq1xB0kUgNYG3DSVDVOzwjxHdUIfpJZ3jkpQ+y/ngdmXRiDCcoc8ELG41GuXiTxc7+ep3fepI8giucFGqUixqjh9LIyLtLSPVKxl83k7WYZ+6mH+HHtnUURwltEU4AAnGau3Wz7xBmghVtMyOYvUDtP8cRv4xpA/0IgNpUnmn4DJan4i7RBvheeNBVu1m9tKLQpIxbRaHRvgkHeYFDauXCHNcNHvSgBk/Gvqb093jzPQ4LG4owfDO/UTYCB3NpUyVZCjthpy+IdC9DgQcRNZMCfhi1ZpdpkfcxRI01mcTsJyiHZC43RnN+syN6q3Xad/LL1PJ48AiUXcr3f+pwT32+tRmisLJzoC1Xjez5j8S3zKk6LV3fVa6H1wh1TQf0iDf4gjmgq/pMNHrtDfnLr1e4P3MK7R5d+DR5RXQD8WSb3S0bHCjTJErjF77kbzuPaabYfz0xFM5OX1tH/tBPEE+stVwg5fX+nHAuU4TwARpJEfBidcBvfeuegvpOkzGtdVvKxFMxo7Lgyvo6s3oCZ+Pkt43BFV37aOj80hTD4C6mQ2lkS5ZqlnoQO//MZt95CNtTqHevn8oSo0/BrM7wsiRpVRq8nFKi5L3SgutnR7XNu9s7aCob9SGwi5Fgr99t8NmYEvaHpzbYmhzkRC2jH8LrouUCBAzgd3tIyB/X6cxBp1UM3QNu5g5cdWRBHUpYFB3RnguY80vuQWWHjdHZtmmm9vm00CjHrAmyXkwzzhp4CeJppQom69jazobAUZpLYN3bIgIqnnTxSRrjMnlUFB+sYFi7HzxVuiHNjBwSNs+p0K1Sg+SQ1c+YqzY9mt4hXfKXdHaAYRIraateoPv5qYZodga6SISVuz7/flyehd2REYH9k0PSt5/JLvfWciXUIymbbB8ZNtD3ceM/DByCHzmxrlPF2miYOvfEG9fwFDk1trudl36Js84kjtaaTyPpvsQ4rirlIIQCM3YhYyqp41zCVFCN0O0Pa1rsb2QF/0QklXUKjZg2klS0foEIvkbo/kUIGWpqtamjKZoqlaBCInr2KHOh1s0zuxnsS1Q8sN1UliLWqiHRAgMmpIY98CK5KH8Q1WajCdImT2OK344yCo0apdbI9QlK1mYwh8+dUwYdadBGrEhd61fQoX13ngv2eKoyLFOGCVkMWxcBlnVriDpIpAE0IliyxVGDD0MXg5HjYd46ssTJGw7LkMffO/54WSJwCErfIBaJx9zinCOps3Am47UdLw6rbq6OOgfV0cdA+ro46B9XRx0D6ujjludCGy/bmRPF0F0Ig4AAKaRBHRwPjIsUoBW1w8q0eJeBkKC+n8mt8JfntN9H/9oz866TCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsJ//yLNkInxH2P0gAAAAAAAAAAgNxkAADGF4AAA==" width="640"/><div class="markdown"><h2 id="数据通信"><a aria-hidden="true" href="#数据通信"><span class="icon icon-link"></span></a>数据通信</h2><p>小程序是基于 <strong>双线程模型</strong>，那就意味着任何数据传递都是线程间的通信，也就是都会有一定的延时。这不像传统 Web 那样，当界面需要更新时，通过调用更新接口 UI 就会同步地渲染出来。在小程序架构里，这一切都会变成异步。</p><p>异步会使得各部分的运行时序变得复杂一些。比如在渲染首屏的时候，逻辑层与渲染层会同时开始初始化工作，但是渲染层需要有逻辑层的数据才能把界面渲染出来，如果渲染层初始化工作较快完成，就要等逻辑层的指令才能进行下一步工作。因此逻辑层与渲染层需要有一定的机制保证时序正确，</p><p>在每个小程序页面的生命周期中，存在着若干次页面数据通信。逻辑层向视图层发送页面数据（<code>data</code> 和 <code>setData</code> 的内容），视图层向逻辑层反馈用户事件。</p></div><img alt="小程序数据通信" src="data:image/png;base64,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" width="640"/><div class="markdown"><p>通过 JSON 的方式进行数据的传递，提高性能的方式就是减少交互的数据量。</p><h2 id="缓存机制"><a aria-hidden="true" href="#缓存机制"><span class="icon icon-link"></span></a>缓存机制</h2><p>小程序宿主环境会管理不同小程序的数据缓存，不同小程序的本地缓存空间是分开的，每个小程序的缓存空间上限为 10MB，如果当前缓存已经达到 10MB，再通过 <code>wx.setStorage</code> 写入缓存会触发 <code>fail</code> 回调。</p><p>小程序的本地缓存不仅仅通过小程序这个维度来隔离空间，考虑到同一个设备可以登录不同微信用户，宿主环境还对不同用户的缓存进行了隔离，避免用户间的数据隐私泄露。</p><p>由于本地缓存是存放在当前设备，用户换设备之后无法从另一个设备读取到当前设备数据，因此用户的关键信息不建议只存在本地缓存，应该把数据放到服务器端进行持久化存储。</p><h2 id="运行时状态"><a aria-hidden="true" href="#运行时状态"><span class="icon icon-link"></span></a>运行时状态</h2><h3 id="运行环境"><a aria-hidden="true" href="#运行环境"><span class="icon icon-link"></span></a>运行环境</h3><p>微信小程序运行在多种平台上：iOS（iPhone/iPad）微信客户端、Android 微信客户端、PC 微信客户端、Mac 微信客户端和用于调试的微信开发者工具。</p><p>各平台脚本执行环境以及用于渲染非原生组件的环境是各不相同的：</p><ul><li>在 iOS 上，小程序逻辑层的 JavaScript 代码运行在 JavaScriptCore 中，视图层是由 WKWebView 来渲染的，环境有 iOS 12、iOS 13 等；</li><li>在 Android 上，小程序逻辑层的 JavaScript 代码运行在 <a href="https://developers.google.com/v8/" target="_blank" rel="noopener noreferrer">V8<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中，视图层是由自研 XWeb 引擎基于 Mobile Chrome 内核来渲染的；</li><li>在 开发工具上，小程序逻辑层的 JavaScript 代码是运行在 <a href="https://nwjs.io/" target="_blank" rel="noopener noreferrer">NW.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中，视图层是由 Chromium Webview 来渲染的。</li></ul><h3 id="运行机制"><a aria-hidden="true" href="#运行机制"><span class="icon icon-link"></span></a>运行机制</h3><h4 id="前台后台状态"><a aria-hidden="true" href="#前台后台状态"><span class="icon icon-link"></span></a>前台/后台状态</h4><p>小程序启动后，界面被展示给用户，此时小程序处于 <strong>前台</strong> 状态。</p><p>当用户点击右上角胶囊按钮关闭小程序，或者按了设备 Home 键离开微信时，小程序并没有完全终止运行，而是进入了后台状态，小程序还可以运行一小段时间。</p><p>当用户再次进入微信或再次打开小程序，小程序又会从后台进入 <strong>前台</strong>。但如果用户很久没有再进入小程序，或者系统资源紧张，小程序可能被 <strong>销毁</strong>，即完全终止运行。</p><h4 id="小程序启动"><a aria-hidden="true" href="#小程序启动"><span class="icon icon-link"></span></a>小程序启动</h4><p>这样，小程序启动可以分为两种情况，一种是 <strong>冷启动</strong>，一种是 <strong>热启动</strong>。</p><ul><li><strong>冷启动</strong>：如果用户首次打开，或小程序销毁后被用户再次打开，此时小程序需要重新加载启动，即冷启动。</li><li><strong>热启动</strong>：如果用户已经打开过某小程序，然后在一定时间内再次打开该小程序，此时小程序并未被销毁，只是从后台状态进入前台状态，这个过程就是热启动。</li></ul><h4 id="小程序销毁时机"><a aria-hidden="true" href="#小程序销毁时机"><span class="icon icon-link"></span></a>小程序销毁时机</h4><p>通常，只有当小程序进入后台一定时间，或者系统资源占用过高，才会被销毁。具体而言包括以下几种情形：</p><ul><li>当小程序进入后台，可以维持一小段时间的运行状态，如果这段时间内都未进入前台，小程序会被销毁。</li><li>当小程序占用系统资源过高，可能会被系统销毁或被微信客户端主动回收。<ul><li>在 iOS 上，当微信客户端在一定时间间隔内连续收到系统内存告警时，会根据一定的策略，主动销毁小程序，并提示用户 <code>运行内存不足，请重新打开该小程序</code>。具体策略会持续进行调整优化。</li><li>建议小程序在必要时使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/device/performance/wx.onMemoryWarning.html" target="_blank" rel="noopener noreferrer">wx.onMemoryWarning<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 监听内存告警事件，进行必要的内存清理。</li></ul></li></ul><h2 id="与普通网页开发的区别"><a aria-hidden="true" href="#与普通网页开发的区别"><span class="icon icon-link"></span></a>与普通网页开发的区别</h2><p>小程序的主要开发语言是 JavaScript ，小程序的开发同普通的网页开发相比有很大的相似性。对于前端开发者而言，从网页开发迁移到小程序的开发成本并不高，但是二者还是有些许区别的。</p><p>​网页 <strong>开发渲染线程</strong> 和 <strong>脚本线程</strong> 是 <strong>互斥</strong> 的，这也是为什么长时间的脚本运行可能会导致页面失去响应，而在小程序中，二者是分开的，分别运行在 <strong>不同的线程</strong> 中。网页开发者可以使用到各种浏览器暴露出来的 <strong>DOM API</strong>，进行 DOM 选中和操作。而如上文所述，小程序的逻辑层和渲染层是分开的，逻辑层运行在 JSCore 中，并没有一个完整浏览器对象，因而缺少相关的 DOM API 和 BOM API。这一区别导致了前端开发非常熟悉的一些库，例如 jQuery、 Zepto 等，在小程序中是无法运行的。同时 JSCore 的环境同 NodeJS 环境也是不尽相同，所以一些 NPM 的包在小程序中也是无法运行的。</p><p>​网页开发者需要面对的环境是各式各样的浏览器，PC 端需要面对 IE、Chrome、QQ 浏览器等，在移动端需要面对 Safari、Chrome 以及 iOS、Android 系统中的各式 WebView。而小程序开发过程中需要面对的是两大操作系统 iOS 和 Android 的微信客户端，以及用于辅助开发的小程序开发者工具，小程序中三大运行环境也是有所区别的，</p><table><thead><tr><th align="left">运行环境</th><th align="left">逻辑层</th><th align="left">渲染层</th></tr></thead><tbody><tr><td align="left">iOS</td><td align="left">JavaScriptCore</td><td align="left">WKWebView</td></tr><tr><td align="left">安卓</td><td align="left">V8</td><td align="left">Chromium 定制内核</td></tr><tr><td align="left">小程序开发者工具</td><td align="left">NWJS</td><td align="left">Chrome WebView</td></tr></tbody></table><p>​网页开发者在开发网页的时候，只需要使用到浏览器，并且搭配上一些辅助工具或者编辑器即可。小程序的开发则有所不同，需要经过申请小程序帐号、安装小程序开发者工具、配置项目等等过程方可完成。</p><hr/><p><strong>参考资料：</strong></p><ul><li><a href="https://juejin.im/post/6844903805675388942" target="_blank" rel="noopener noreferrer">微信及支付宝小程序实现原理概述<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/cross-platform-guidebook/edit/master/docs/mini-program/wechat.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/17/2020, 6:06:31 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/cross-platform-guidebook/umi.js"></script>
    <script src="/cross-platform-guidebook/docs__mini-program__wechat.md.js"></script>
  </body>
</html>
